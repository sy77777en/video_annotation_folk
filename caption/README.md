# 📌 Video Caption Feedback App

This is a **Streamlit-based web app** for **evaluating and improving video captions**. It allows users to provide structured feedback on AI-generated or human-annotated captions, refining them through an iterative process.

## 🚀 Features
- Users review pre-loaded captions for given videos.
- A step-by-step feedback system improves captions iteratively.
- AI-generated suggestions enhance user-provided feedback.
- Users provide ratings at multiple stages to ensure caption quality.

---

## 🛠 Installation Guide

### **1️⃣ Install Required Packages**
Ensure **Python 3.8+** is installed, then install the necessary dependencies:
```bash
python3 -m pip install streamlit openai streamlit-feedback
python3 -m pip install torch torchvision torchaudio
python3 -m pip install opencv-python-headless numpy
python3 -m pip install -q -U google-genai
```

### **2️⃣ Clone and Run the Streamlit App**
```bash
git clone https://github.com/linzhiqiu/video_captioning.git
cd video_captioning
streamlit run app_all.py --server.port 51912 --server.address 0.0.0.0
```
The Streamlit app should now be running and accessible in your browser! 🎉

---

![image.png](image.png)

## 🏗️ Workflow Overview

1️⃣ **Original Caption Display**  
- A video is presented with a **pre-loaded caption**, which may be generated by a model or written by a human annotator.  

2️⃣ **User Rating of the Initial Caption**  
- Users rate the caption using a **1-5 Likert scale**:
  - **5 (😀 Happiest Face)** → No further action is required.
  - **1-4** → The user is prompted to provide **initial feedback** on how to improve the caption.

3️⃣ **Polishing User Feedback with AI**  
- The user's feedback is refined by **ChatGPT** to make it clearer and more structured.  
- The AI-generated feedback is presented to the user, who then rates it again on a **1-5 scale**:
  - **5** → The AI-generated feedback is accepted as final.  
  - **1-4** → The user can modify the feedback manually before finalizing it.

4️⃣ **Generating an Improved Caption**  
- The finalized feedback is sent to **ChatGPT**, which generates a **new, improved caption** (without seeing the video).  
- The user reviews and rates this caption on a **1-5 scale**:
  - **5** → The improved caption is accepted as final.  
  - **1-4** → The user can edit the caption before finalizing it.

5️⃣ **Finalizing & Saving the Caption**  
- The final caption and all user feedback are saved for future reference. 🎯

---

## 🔧 Configuration
The app relies on a **JSON configuration file** that specifies:
- **Captions file** (pre-loaded captions)
- **Video URLs file** (links to the videos)
- **Prompts for AI-generated feedback and captions**
- **Output directory** for saving feedback data

Modify the config files listed in `test_configs.json` to adjust these parameters.